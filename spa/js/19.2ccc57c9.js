(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"52f0":function(a,e,t){"use strict";t.r(e);var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("page",{attrs:{breadcrumbs:[{label:"Lista",link:"/sindicancias/lista"},{label:"Editar",link:"/sindicancias/editar"}]}},[t("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:a.tab,callback:function(e){a.tab=e},expression:"tab"}},[t("q-tab",{attrs:{name:"main",icon:"edit",label:"Principal"}}),t("q-tab",{attrs:{name:"movimentos",icon:"loop",label:"Movimentos"}}),t("q-tab",{attrs:{name:"sobrestamentos",icon:"hourglass_top",label:"Sobrestamentos"}}),t("q-tab",{attrs:{name:"arquivos",icon:"folder",label:"Arquivos"}})],1),t("q-tab-panels",{attrs:{animated:""},model:{value:a.tab,callback:function(e){a.tab=e},expression:"tab"}},[t("q-tab-panel",{staticClass:"row",attrs:{name:"main"}},[t("div",{staticClass:"q-pa-md col-12"},[t("Prioridade",{model:{value:a.register.prioridade,callback:function(e){a.$set(a.register,"prioridade",e)},expression:"register.prioridade"}})],1),t("div",{staticClass:"q-pa-md col-4"},[t("Andamento",{attrs:{type:"sindicancia"},model:{value:a.register.id_andamento,callback:function(e){a.$set(a.register,"id_andamento",e)},expression:"register.id_andamento"}})],1),t("div",{staticClass:"q-pa-md col-4"},[t("AndamentoCoger",{attrs:{type:"sindicancia"},model:{value:a.register.id_andamentocoger,callback:function(e){a.$set(a.register,"id_andamentocoger",e)},expression:"register.id_andamentocoger"}})],1),99==a.register.id_andamentocoger?t("div",{staticClass:"q-pa-md col-4"},[t("InputText",{ref:"motivo_cancelamento",attrs:{label:"Motivo cancelamento",required:""},model:{value:a.register.motivo_cancelamento,callback:function(e){a.$set(a.register,"motivo_cancelamento",e)},expression:"register.motivo_cancelamento"}})],1):a._e(),t("div",{staticClass:"q-pa-md col-4"},[t("InputText",{ref:"doc_origem_txt",attrs:{label:"Documento de origem",required:""},model:{value:a.register.doc_origem_txt,callback:function(e){a.$set(a.register,"doc_origem_txt",e)},expression:"register.doc_origem_txt"}})],1),t("div",{staticClass:"q-pa-md col-4"},[t("InputDate",{attrs:{label:"Data da fato"},model:{value:a.register.fato_data,callback:function(e){a.$set(a.register,"fato_data",e)},expression:"register.fato_data"}})],1),t("div",{staticClass:"q-pa-md col-4"},[t("OPM",{ref:"opm",attrs:{required:""},model:{value:a.register.cdopm,callback:function(e){a.$set(a.register,"cdopm",e)},expression:"register.cdopm"}})],1),t("div",{staticClass:"q-pa-md col-4"},[t("Portaria",{ref:"portaria_numero",attrs:{label:"N° Portaria",required:""},model:{value:a.register.portaria_numero,callback:function(e){a.$set(a.register,"portaria_numero",e)},expression:"register.portaria_numero"}})],1),t("div",{staticClass:"q-pa-md col-4"},[t("InputDate",{ref:"portaria_data",attrs:{label:"Data da Portaria",required:""},model:{value:a.register.portaria_data,callback:function(e){a.$set(a.register,"portaria_data",e)},expression:"register.portaria_data"}})],1),t("div",{staticClass:"q-pa-md col-4"},[t("TipoBoletim",{model:{value:a.register.doc_tipo,callback:function(e){a.$set(a.register,"doc_tipo",e)},expression:"register.doc_tipo"}})],1),t("div",{staticClass:"q-pa-md col-4"},[t("InputText",{attrs:{label:"N° Boletim"},model:{value:a.register.doc_numero,callback:function(e){a.$set(a.register,"doc_numero",e)},expression:"register.doc_numero"}})],1),t("div",{staticClass:"q-pa-md col-4"},[t("InputDate",{attrs:{label:"Data da abertura"},model:{value:a.register.abertura_data,callback:function(e){a.$set(a.register,"abertura_data",e)},expression:"register.abertura_data"}})],1),t("div",{staticClass:"q-pa-md col-4"},[t("InputSN",{attrs:{label:"Houve prorogação"},model:{value:a.register.prorogacao,callback:function(e){a.$set(a.register,"prorogacao",e)},expression:"register.prorogacao"}})],1),a.register.prorogacao?t("div",{staticClass:"q-pa-md col-4"},[t("InputNumber",{ref:"prorogacao_dias",attrs:{label:"Quantos dias?",required:""},model:{value:a.register.prorogacao_dias,callback:function(e){a.$set(a.register,"prorogacao_dias",e)},expression:"register.prorogacao_dias"}})],1):a._e(),t("div",{staticClass:"q-pa-md col-12"},[t("InputText",{ref:"sintese_txt",attrs:{label:"Sintese do fato",minLength:200,autogrow:"",required:"",lorem:200},model:{value:a.register.sintese_txt,callback:function(e){a.$set(a.register,"sintese_txt",e)},expression:"register.sintese_txt"}})],1),a.register.id?[t("ProcedOrigem",{attrs:{type:"sindicancia",data:{id_sindicancia:a.register.id}}}),t("Membro",{ref:"sindicante",attrs:{label:"Sindicante",required:"",data:{situacao:"sindicante",id_sindicancia:a.register.id}}}),t("Membro",{ref:"escrivao",attrs:{label:"Escrivão",data:{situacao:"escrivao",id_sindicancia:a.register.id}}}),t("Acusado",{attrs:{label:"Sindicado",data:{situacao:"sindicado",id_sindicancia:a.register.id}}}),t("Vitima",{attrs:{data:{id_sindicancia:a.register.id}}}),t("FileUpload",{attrs:{label:"Relatório do Encarregado",data:{proc:"sindicancia",campo:"relatorio_encarregado_file",id_proc:a.register.id}}}),t("FileUpload",{attrs:{label:"Solução do Comandante",data:{proc:"sindicancia",campo:"solucao_cmt_file",id_proc:a.register.id}}}),t("FileUpload",{attrs:{label:"Solução CMT Geral",data:{proc:"sindicancia",campo:"solucao_cmtgeral_file",id_proc:a.register.id}}})]:a._e(),t("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:"Salvar"},on:{click:a.update}})],2),t("q-tab-panel",{attrs:{name:"movimentos"}},[t("movimento",{attrs:{data:{id_sindicancia:a.register.id}}})],1),t("q-tab-panel",{attrs:{name:"sobrestamentos"}},[t("sobrestamento",{attrs:{data:{id_sindicancia:a.register.id}},on:{submit:a.changeAndamento}})],1),t("q-tab-panel",{attrs:{name:"arquivos"}},[t("arquivo",{attrs:{data:{id_sindicancia:a.register.id}}})],1)],1)],1)},r=[],o=t("e4fd"),s=t("77e4"),n=t("3fc9"),d=t("c41e"),c=t("d49d"),l=t("2498"),u=t("ee53"),m=t("3631"),p=t("dbe0"),g=t("ec0d"),b=t("75ba"),_=t("e139"),f=t("3e95"),v=t("7fb4"),q=t("c652"),x=t("c49f"),C=t("71ec"),k=t("f1f41"),$=t("ead8"),O=t("a326"),j=t("e151"),h=t("0b2c"),y=t("136f"),I=t("d6e1"),P=t("3be9");const w=a=>{const e={ipm:1,sindicancia:6,cd:9,cj:12,apfd:0,fatd:1,iso:18,desercao:0,it:21,adl:0,pad:24,sai:26,proc_outros:0};return e[a]},S=a=>{const e={ipm:4,sindicancia:8,cd:11,cj:12,apfd:0,fatd:3,iso:20,desercao:0,it:23,adl:0,pad:26,sai:28,proc_outros:0};return e[a]};var T=function(a,e,t,i){function r(a){return a instanceof t?a:new t((function(e){e(a)}))}return new(t||(t=Promise))((function(t,o){function s(a){try{d(i.next(a))}catch(e){o(e)}}function n(a){try{d(i["throw"](a))}catch(e){o(e)}}function d(a){a.done?t(a.value):r(a.value).then(s,n)}d((i=i.apply(a,e||[])).next())}))};const A=["motivo_cancelamento","doc_origem_txt","opm","portaria_numero","sintese_txt","portaria_data","prorogacao_dias","motivo_outros","sindicante","escrivao"];var D=Object(o["defineComponent"])({name:"Form",components:{Page:s["default"],ProcedOrigem:n["default"],Acusado:d["default"],Vitima:c["default"],FileUpload:l["default"],Membro:u["default"],Movimento:m["default"],Sobrestamento:p["default"],Arquivo:g["default"],InputDate:b["default"],TipoBoletim:_["default"],Prioridade:f["default"],InputText:v["default"],InputNumber:q["default"],InputSN:x["default"],OPM:C["default"],Portaria:k["default"],Andamento:$["default"],AndamentoCoger:O["default"]},setup(a,{refs:e,root:t}){const i=Object(o["reactive"])({step:1,tab:"main",loading:!1,register:{id:0,sintese_txt:"",prioridade:!1,id_andamento:6,id_andamentocoger:"",motivo_cancelamento:"",doc_origem_txt:"",fato_data:"",cdopm:"",portaria_numero:"",portaria_data:"",doc_tipo:"",doc_numero:"",abertura_data:"",prorogacao:"",prorogacao_dias:0,motivo_abertura:"",motivo_outros:"",completo:!1},andamentoCogerSindicancia:h["o"],andamentoSindicancia:h["v"],motivoAberturaSindicancia:h["w"],prorogacao:h["E"],tipoBoletim:h["G"]}),r={update(){return T(this,void 0,void 0,(function*(){if(Object(y["b"])(e,A)){const a=yield this.subforms();if(a&&i.register.id)return i.register.completo=!0,yield Object(j["d"])(`sindicancias/${i.register.id}`,i.register),t.$router.push("/sindicancias/lista")}}))},subforms(){return T(this,void 0,void 0,(function*(){const a=yield e.sindicante.getState();return"toInsert"!==a||(Object(P["a"])("Insira o sindicante"),!1)}))},changeAndamento(a){return T(this,void 0,void 0,(function*(){if(!i.register.id)return;const{id:e}=i.register;if(!a.termino_data)return i.register.id_andamento=S("sindicancia"),void(yield Object(j["d"])(`sindicancias/${e}`,i.register,{silent:!0}));i.register.id_andamento=w("sindicancia"),yield Object(j["d"])(`sindicancias/${e}`,i.register,{silent:!0})}))},loadData(){return T(this,void 0,void 0,(function*(){const{id:a}=t.$route.params;a&&(i.register=yield Object(j["b"])(`sindicancias/${a}`))}))}};return r.loadData(),Object.assign(Object.assign(Object.assign({},Object(o["toRefs"])(i)),{denseVal:Object(o["computed"])((()=>Object(I["a"])(t)))}),r)}}),M=D,N=t("2877"),Q=t("429b"),B=t("7460"),E=t("adad"),F=t("823b"),U=t("9c40"),V=t("eebe"),G=t.n(V),J=Object(N["a"])(M,i,r,!1,null,null,null);e["default"]=J.exports;G()(J,"components",{QTabs:Q["a"],QTab:B["a"],QTabPanels:E["a"],QTabPanel:F["a"],QBtn:U["a"]})}}]);